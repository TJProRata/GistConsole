<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gist Widget Demo - Women's World Widgets</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
        'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
        sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 3rem;
    }

    .header h1 {
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .header p {
      font-size: 1.125rem;
      opacity: 0.9;
    }

    .demo-section {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
                  0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .demo-section h2 {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #1f2937;
    }

    .demo-section p {
      color: #6b7280;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .code-block {
      background: #1f2937;
      color: #e5e7eb;
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      margin-bottom: 1.5rem;
      font-family: 'Courier New', Courier, monospace;
      font-size: 0.875rem;
    }

    .controls {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-bottom: 1.5rem;
    }

    .btn {
      padding: 0.625rem 1.25rem;
      border-radius: 0.5rem;
      border: none;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: #667eea;
      color: white;
    }

    .btn-primary:hover {
      background: #5568d3;
    }

    .btn-secondary {
      background: #f3f4f6;
      color: #374151;
    }

    .btn-secondary:hover {
      background: #e5e7eb;
    }

    .btn-danger {
      background: #ef4444;
      color: white;
    }

    .btn-danger:hover {
      background: #dc2626;
    }

    .widget-container {
      min-height: 300px;
      border: 2px dashed #e5e7eb;
      border-radius: 0.5rem;
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .placeholder {
      text-align: center;
      color: #9ca3af;
    }

    .article-mock {
      max-width: 640px;
      margin: 0 auto;
      line-height: 1.8;
      color: #374151;
    }

    .article-mock h3 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: #1f2937;
    }

    .article-mock p {
      margin-bottom: 1.5rem;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>âœ¨ Gist Widget Demo</h1>
      <p>Testing Women's World widgets with IIFE bundles</p>
    </div>

    <!-- Floating Widget Demo -->
    <div class="demo-section">
      <h2>ðŸŽˆ Floating Widget</h2>
      <p>The floating widget appears as a fixed button and expands on click. Perfect for persistent site-wide help.</p>

      <div class="code-block">
&lt;script src="/womens-world-floating.js"&gt;&lt;/script&gt;
&lt;div id="floating-widget-root"&gt;&lt;/div&gt;
&lt;script&gt;
  GistWidget.init({
    containerId: "floating-widget-root",
    title: "âœ¨ Woman's World Answers",
    placeholder: "Ask your health questions...",
    enableStreaming: false,
    placement: "bottom-right"
  });
&lt;/script&gt;
      </div>

      <div class="controls">
        <button class="btn btn-primary" onclick="initFloatingWidget()">Initialize</button>
        <button class="btn btn-secondary" onclick="updateFloatingWidget()">Update Title</button>
        <button class="btn btn-danger" onclick="destroyFloatingWidget()">Destroy</button>
      </div>

      <div id="floating-widget-root" class="widget-container">
        <div class="placeholder">Click "Initialize" to load the floating widget</div>
      </div>
    </div>

    <!-- Inline Widget Demo -->
    <div class="demo-section">
      <h2>ðŸ“„ Inline Widget</h2>
      <p>The inline widget is always expanded and designed for article embedding. Responsive up to 640px.</p>

      <div class="code-block">
&lt;script src="/womens-world-inline.js"&gt;&lt;/script&gt;
&lt;div id="inline-widget-root"&gt;&lt;/div&gt;
&lt;script&gt;
  GistWidget.init({
    containerId: "inline-widget-root",
    title: "âœ¨ Woman's World Answers",
    placeholder: "Ask your health questions...",
    enableStreaming: false,
    variant: "light"
  });
&lt;/script&gt;
      </div>

      <div class="controls">
        <button class="btn btn-primary" onclick="initInlineWidget()">Initialize</button>
        <button class="btn btn-secondary" onclick="updateInlineWidget()">Change Variant</button>
        <button class="btn btn-danger" onclick="destroyInlineWidget()">Destroy</button>
      </div>

      <div class="article-mock">
        <h3>Sample Article Context</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.</p>

        <div id="inline-widget-root" class="widget-container">
          <div class="placeholder">Click "Initialize" to load the inline widget</div>
        </div>

        <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
      </div>
    </div>
  </div>

  <!-- Load widget bundles -->
  <script src="/womens-world-floating.js"></script>
  <script src="/womens-world-inline.js"></script>

  <script>
    // Floating widget controls
    let floatingInitialized = false;

    function initFloatingWidget() {
      if (window.GistWidget) {
        window.GistWidget.init({
          containerId: "floating-widget-root",
          title: "âœ¨ Woman's World Answers",
          placeholder: "Ask your health questions...",
          seedQuestionsRow1: [
            "What are the early signs of menopause?",
            "How can I improve my bone health?",
            "What vitamins should I take daily?"
          ],
          seedQuestionsRow2: [
            "How to manage stress naturally?",
            "What are good exercises for flexibility?",
            "How can I improve my sleep quality?"
          ],
          enableStreaming: false,
          placement: "bottom-right"
        });
        floatingInitialized = true;
        console.log("Floating widget initialized");
      } else {
        alert("GistWidget not loaded. Check console for errors.");
      }
    }

    function updateFloatingWidget() {
      if (!floatingInitialized) {
        alert("Initialize the widget first!");
        return;
      }

      window.GistWidget.update({
        title: "ðŸŒ¸ Updated Health Q&A",
        placeholder: "Updated placeholder...",
      });
      console.log("Floating widget updated");
    }

    function destroyFloatingWidget() {
      if (window.GistWidget) {
        window.GistWidget.destroy();
        floatingInitialized = false;
        document.getElementById("floating-widget-root").innerHTML =
          '<div class="placeholder">Widget destroyed. Click "Initialize" to reload.</div>';
        console.log("Floating widget destroyed");
      }
    }

    // Inline widget controls
    let inlineInitialized = false;
    let currentVariant = "light";

    function initInlineWidget() {
      if (window.GistWidget) {
        window.GistWidget.init({
          containerId: "inline-widget-root",
          title: "âœ¨ Woman's World Answers",
          placeholder: "Ask your health questions...",
          seedQuestionsRow1: [
            "What are the early signs of menopause?",
            "How can I improve my bone health?",
            "What vitamins should I take daily?"
          ],
          seedQuestionsRow2: [
            "How to manage stress naturally?",
            "What are good exercises for flexibility?",
            "How can I improve my sleep quality?"
          ],
          enableStreaming: false,
          variant: currentVariant,
          maxWidth: 640
        });
        inlineInitialized = true;
        console.log("Inline widget initialized");
      } else {
        alert("GistWidget not loaded. Check console for errors.");
      }
    }

    function updateInlineWidget() {
      if (!inlineInitialized) {
        alert("Initialize the widget first!");
        return;
      }

      // Cycle through variants
      const variants = ["light", "neutral", "subtle"];
      const currentIndex = variants.indexOf(currentVariant);
      currentVariant = variants[(currentIndex + 1) % variants.length];

      window.GistWidget.update({
        variant: currentVariant
      });
      console.log(`Inline widget variant changed to: ${currentVariant}`);
    }

    function destroyInlineWidget() {
      if (window.GistWidget) {
        window.GistWidget.destroy();
        inlineInitialized = false;
        document.getElementById("inline-widget-root").innerHTML =
          '<div class="placeholder">Widget destroyed. Click "Initialize" to reload.</div>';
        console.log("Inline widget destroyed");
      }
    }

    // Log bundle load status
    window.addEventListener('load', () => {
      console.log("Page loaded");
      console.log("GistWidget available:", typeof window.GistWidget !== 'undefined');

      // Check for CSS injection
      const styles = document.querySelectorAll('style');
      console.log(`Found ${styles.length} <style> tags (should include injected CSS)`);
    });
  </script>
</body>
</html>
